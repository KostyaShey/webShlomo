(this.webpackJsonpwebshlomo=this.webpackJsonpwebshlomo||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(18),a(1)),s=a.n(i),l=a(6),u=a(5),m=a(3),d=a(7),p=a(8),h=a(4),f=a(10),v=a(9);a(20),a(21);function b(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"title bold"},r.a.createElement("p",{onClick:e.changeVisibility,className:"pointerOnHover"},r.a.createElement("i",{className:"fas fa-plus-circle"})," Add ",{expences:"expences",income:"income",mExpences:"per month expences",mIncome:"per month income"}[e.typeOfData])),r.a.createElement("div",{className:"value"}),r.a.createElement("div",{className:"button"}))}var E=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.data.reduce((function(e,t){return e+t.value}),0);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"title bold"},r.a.createElement("p",null,"Sum:")),r.a.createElement("div",{className:"value bold"},r.a.createElement("p",{className:"numbersAlign"},e," \u20ac")),r.a.createElement("div",{className:"button"}))}}]),a}(n.Component);function D(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"title bold"},r.a.createElement("p",null,{expences:"Expences",income:"Income",mExpences:"Per Month Expences",mIncome:"Per Month Income"}[e.name].toUpperCase())),r.a.createElement("div",{className:"value"}),r.a.createElement("div",{className:"button"}))}a(22);var y=a(2);a(23);function O(e){var t=Object(n.useState)({}),a=Object(y.a)(t,2),c=a[0],o=a[1],i=function(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(m.a)({},a,n))}))},d=function(){var t=Object(l.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.writeToDB({name:c.inputTitle,value:parseInt(c.inputValue)},e.typeOfData,e.date.selectedMonth,e.date.selectedYear),o({inputTitle:"",inputValue:""});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"row noHover"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"inputTitle"},r.a.createElement("input",{type:"text",name:"inputTitle",value:c.inputTitle,placeholder:"Input Title",onChange:i})),r.a.createElement("div",{className:"inputValue"},r.a.createElement("input",{type:"number",name:"inputValue",value:c.inputValue,placeholder:"Input Value",onChange:i})),r.a.createElement("div",{className:"inputButtons inputButtons"},r.a.createElement("button",{type:"submit"},"\uf00c"),r.a.createElement("button",{type:"button",onClick:e.changeVisibility},"\uf05e"))))}a(24);function B(e){var t=Object(n.useState)({inputTitle:e.item.name,inputValue:e.item.value}),a=Object(y.a)(t,2),c=a[0],o=a[1],i=function(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(m.a)({},a,n))}))},d=function(){var t=Object(l.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.updateInDB({name:c.inputTitle,value:parseInt(c.inputValue)},e.item._id.$oid,e.typeOfData),e.setEditMode();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"row noHover"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"inputTitle"},r.a.createElement("input",{type:"text",name:"inputTitle",value:c.inputTitle,placeholder:"Input Title",onChange:i})),r.a.createElement("div",{className:"inputValue"},r.a.createElement("input",{type:"number",name:"inputValue",value:c.inputValue,placeholder:"Input Value",onChange:i})),r.a.createElement("div",{className:"inputButtons"},r.a.createElement("button",{type:"button",onClick:function(t){t.preventDefault(),e.setEditMode()}},"\uf05e"),r.a.createElement("button",{type:"submit"},"\uf00c"))))}function j(e){var t=function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.deleteFromDB(e.item._id.$oid,e.typeOfData);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row item"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"title"},r.a.createElement("p",null,e.item.name)),r.a.createElement("div",{className:"value"},r.a.createElement("p",{className:"numbersAlign"},e.item.value," \u20ac")),r.a.createElement("div",{className:"button trash"},r.a.createElement("button",{type:"button",onClick:e.setEditMode},"\uf044"),r.a.createElement("button",{type:"button",onClick:t},"\uf2ed")))}function w(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),c=a[0],o=a[1];return c?r.a.createElement(B,{setEditMode:o,item:e.item,typeOfData:e.typeOfData,updateInDB:e.updateInDB,date:e.date}):r.a.createElement(j,{setEditMode:o,item:e.item,typeOfData:e.typeOfData,deleteFromDB:e.deleteFromDB,date:e.date})}a(25);function g(e){var t=Object(n.useState)(!0),a=Object(y.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(y.a)(i,2),l=s[0],u=s[1],m=function(){o((function(e){return!e})),u((function(e){return!e}))};return r.a.createElement("div",null,r.a.createElement("p",{id:"noData"},"No Data available",r.a.createElement("br",null),"\xaf\\_(\u30c4)_/\xaf"),c&&r.a.createElement(b,{type:e.type,changeVisibility:m}),l&&r.a.createElement(O,{changeVisibility:m,writeToDB:e.writeToDB,date:e.date,typeOfData:e.typeOfData}))}var N=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={showAddRow:!0,showInputRow:!1},n.changeVisibility=n.changeVisibility.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"changeVisibility",value:function(){this.setState({showInputRow:!this.state.showInputRow}),this.setState({showAddRow:!this.state.showAddRow})}},{key:"render",value:function(){var e=this;return 0===this.props.data.length?r.a.createElement("div",null,r.a.createElement(D,{name:this.props.typeOfData}),r.a.createElement(g,{typeOfData:this.props.typeOfData,writeToDB:this.props.writeToDB,date:this.props.date})):r.a.createElement("div",null,r.a.createElement(D,{name:this.props.typeOfData}),this.props.data.map((function(t){return r.a.createElement(w,{item:t,typeOfData:e.props.typeOfData,deleteFromDB:e.props.deleteFromDB,updateInDB:e.props.updateInDB,date:e.props.date,key:t._id.$oid})})),r.a.createElement(E,{data:this.props.data}),this.state.showAddRow&&r.a.createElement(b,{typeOfData:this.props.typeOfData,changeVisibility:this.changeVisibility}),this.state.showInputRow&&r.a.createElement(O,{changeVisibility:this.changeVisibility,writeToDB:this.props.writeToDB,date:this.props.date,typeOfData:this.props.typeOfData}))}}]),a}(n.Component);a(26);function M(e){var t=Object(n.useRef)(!1);return Object(n.useEffect)((function(){t.current?e.readAllCollectionsFromDB(e.date.selectedMonth,e.date.selectedYear):t.current=!0}),[e.date.selectedMonth]),r.a.createElement("div",{className:"monthChanger"},r.a.createElement("div",{className:"prevMonth"},r.a.createElement("button",{type:"button",onClick:function(){e.changeMonth(-1)}},"\uf04a")),r.a.createElement("div",{className:"currentMonth"},["January","February","March","April","May","June","July","August","September","October","November","December"][e.date.selectedMonth],", ",e.date.selectedYear),r.a.createElement("div",{className:"nextMonth"},r.a.createElement("button",{type:"button",onClick:function(){e.changeMonth(1)}},"\uf04e")))}a(27);function F(e){var t=e.data.reduce((function(e,t){return e+t.value}),0);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"leftBorder"}),r.a.createElement("div",{className:"title bold"},r.a.createElement("p",null,"Sum of ",{mExpences:"per month expences",mIncome:"per month income"}[e.typeOfData])),r.a.createElement("div",{className:"value bold"},r.a.createElement("p",{className:"numbersAlign"},t," \u20ac")),r.a.createElement("div",{className:"button expand"},r.a.createElement("button",{type:"button",onClick:function(){return e.setShowDetails((function(e){return!e}))}},"\uf150")))}a(28);function T(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(F,{data:e.data,typeOfData:e.typeOfData,setShowDetails:o}),c&&e.data.map((function(e){return r.a.createElement(w,{item:e,key:e._id.$oid})})))}var I=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,{date:this.props.data.date,changeMonth:this.props.changeMonth,readAllCollectionsFromDB:this.props.readAllCollectionsFromDB}),r.a.createElement("div",{className:"monthTable"},!this.props.data.loading&&r.a.createElement(N,{typeOfData:"expences",data:this.props.data.expences,writeToDB:this.props.writeToDB,readFromDB:this.props.readFromDB,deleteFromDB:this.props.deleteFromDB,updateInDB:this.props.updateInDB,date:this.props.data.date}),!this.props.data.loading&&r.a.createElement(N,{typeOfData:"income",data:this.props.data.income,writeToDB:this.props.writeToDB,readFromDB:this.props.readFromDB,deleteFromDB:this.props.deleteFromDB,updateInDB:this.props.updateInDB,date:this.props.data.date})),r.a.createElement("div",{className:"monthTable"},!this.props.data.loading&&r.a.createElement(T,{typeOfData:"mExpences",data:this.props.data.mExpences}),!this.props.data.loading&&r.a.createElement(T,{typeOfData:"mIncome",data:this.props.data.mIncome})))}}]),a}(n.Component),k=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={loading:!0,date:{currentMonth:(new Date).getMonth(),currentYear:(new Date).getFullYear(),selectedMonth:(new Date).getMonth(),selectedYear:(new Date).getFullYear()}},n.readFromDB=n.readFromDB.bind(Object(h.a)(n)),n.writeToDB=n.writeToDB.bind(Object(h.a)(n)),n.deleteFromDB=n.deleteFromDB.bind(Object(h.a)(n)),n.updateInDB=n.updateInDB.bind(Object(h.a)(n)),n.changeMonth=n.changeMonth.bind(Object(h.a)(n)),n.readAllCollectionsFromDB=n.readAllCollectionsFromDB.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"readFromDB",value:function(e,t,a){var n=this;fetch("/fetch/".concat(e),{method:"GET",headers:{"Content-type":"application/json",month:t+1,year:a,typeOfData:e}}).then((function(e){return e.json()})).then((function(t){return Object(m.a)({},e,t)})).then((function(e){return n.setState(e)})),console.log("done fetching ".concat(e))}},{key:"readAllCollectionsFromDB",value:function(e,t){for(var a=["income","expences","mExpences","mIncome"],n=0;n<a.length;n++)this.readFromDB(a[n],e,t)}},{key:"writeToDB",value:function(e,t,a,n){var r=this;fetch("/add/".concat(t),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.name,value:e.value,month:a+1,year:n})}).then((function(e){return e.json()})).then((function(e){return r.setState(Object(m.a)({},t,e))}))}},{key:"deleteFromDB",value:function(e,t){var a=this,n=this.state.date.selectedMonth+1,r=this.state.date.selectedYear;fetch("/delete/".concat(t),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e,month:n,year:r})}).then((function(e){return e.json()})).then((function(e){return a.setState(Object(m.a)({},t,e))}))}},{key:"updateInDB",value:function(e,t,a){var n=this,r=this.state.date.selectedMonth+1,c=this.state.date.selectedYear;fetch("/update/".concat(a),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:t,name:e.name,value:e.value,month:r,year:c})}).then((function(e){return e.json()})).then((function(e){return n.setState(Object(m.a)({},a,e))}))}},{key:"changeMonth",value:function(e){var t=this.state.date.selectedMonth,a=this.state.date.selectedYear;11===this.state.date.selectedMonth&&e>0?(t=0,a+=1):0===this.state.date.selectedMonth&&e<0?(t=11,a-=1):t+=e,this.setState({date:Object(u.a)(Object(u.a)({},this.state.date),{},{selectedMonth:t,selectedYear:a})})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},a=["income","expences","mExpences","mIncome"],n=0;case 3:if(!(n<a.length)){e.next=10;break}return e.next=6,fetch("/fetch/".concat(a[n]),{method:"GET",headers:{"Content-type":"application/json",month:this.state.date.currentMonth+1,year:this.state.date.currentYear,typeOfData:a[n]}}).then((function(e){return e.json()}));case 6:t[a[n]]=e.sent;case 7:n++,e.next=3;break;case 10:t.loading=!1,this.setState(t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(I,{data:this.state,writeToDB:this.writeToDB,readFromDB:this.readFromDB,deleteFromDB:this.deleteFromDB,updateInDB:this.updateInDB,changeMonth:this.changeMonth,readAllCollectionsFromDB:this.readAllCollectionsFromDB})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.5f2eee30.chunk.js.map